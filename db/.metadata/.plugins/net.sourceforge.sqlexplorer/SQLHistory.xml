<?xml version="1.0" encoding="UTF-8"?>

<history>
  <element execution-count="3" last-execution-time="1331435624838" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golf_score_dq(text, text, text,integer, timestamp) TO GROUP golfscore</element>
  <element execution-count="3" last-execution-time="1331435624828" alias="SimpleDemo" user-name="golfscore">alter function golf_score_dq(text, text, text,integer, timestamp) owner to postgres</element>
  <element execution-count="3" last-execution-time="1331435624816" alias="SimpleDemo" user-name="golfscore">create or replace function golf_score_dq(alreadyauth_ text, userid_ text, sessionid_ text ,golfScoreId_ integer, lastUpdate_ timestamp ) returns boolean as $body$ declare begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( userid_,sessionid_) ; perform isuserauthorized(userid_,'DELETE_GOLF_SCORE' ); end if; delete from golf_score where golf_score_id=golfScoreId_ and last_update = lastUpdate_; if found then return true; else raise exception 'Delete Failed for GOLF_SCORE- The record may have been changed or deleted before the attempt.'; end if; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="3" last-execution-time="1331435624804" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golf_score_uq(text, text, text ,integer,timestamp,integer,integer) TO GROUP golfscore</element>
  <element execution-count="3" last-execution-time="1331435624793" alias="SimpleDemo" user-name="golfscore">alter function golf_score_uq(text, text, text ,integer,timestamp,integer,integer) owner to postgres</element>
  <element execution-count="3" last-execution-time="1331435624782" alias="SimpleDemo" user-name="golfscore">create or replace function golf_score_uq(alreadyauth_ text, securityuserid_ text, sessionid_ text , golfScoreId_ integer, lastUpdate_ timestamp, golfScore_ integer, golferId_ integer) returns golf_score as $body$ declare updatedrow golf_score; begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( securityuserid_,sessionid_) ; perform isuserauthorized( securityuserid_, 'UPDATE_GOLF_SCORE' ); end if; update golf_score set last_update = now() , golf_score= golfScore_ , golfer_id= golferId_ where golf_score_id=golfScoreId_ and last_update = lastUpdate_ returning * into updatedrow; if found then return updatedrow; else raise exception 'Update Failed for GOLF_SCORE- The record may have been changed or deleted before the attempt.'; end if; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="5" last-execution-time="1331435624771" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golf_score_iq(text, text, text ,integer,integer) TO GROUP golfscore</element>
  <element execution-count="9" last-execution-time="1331435624759" alias="SimpleDemo" user-name="golfscore">alter function golf_score_iq(text, text, text ,integer,integer) owner to postgres</element>
  <element execution-count="4" last-execution-time="1331435624748" alias="SimpleDemo" user-name="golfscore">create or replace function golf_score_iq(alreadyauth_ text, securityuserid_ text, sessionid_ text,golfScore_ integer,golferId_ integer) returns golf_score as $body$ declare newrow golf_score; begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( securityuserid_,sessionid_) ; perform isuserauthorized( securityuserid_,'INSERT_GOLF_SCORE' ); end if; insert into golf_score( last_update,golf_score,golfer_id) values ( now(),golfScore_,golferId_) returning * into newrow; return newrow; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="9" last-execution-time="1331435624737" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golf_score_bypk(text, text, text,integer) TO GROUP golfscore</element>
  <element execution-count="9" last-execution-time="1331435624726" alias="SimpleDemo" user-name="golfscore">ALTER FUNCTION golf_score_bypk(text, text, text,integer) OWNER TO postgres</element>
  <element execution-count="9" last-execution-time="1331435624715" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION golf_score_bypk(alreadyAuth_ text, securityuserid_ text, sessionid_ text ,golfScoreId_ integer) RETURNS golf_score AS $BODY$ Declare result golf_score; Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_GOLF_SCORE' ); end if; --golf_score_id, last_update, golf_score, golfer_id select * into result from golf_score where golf_score_id=golfScoreId_; return result; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100</element>
  <element execution-count="12" last-execution-time="1331435624703" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golf_score_sq(text, text, text, text, text, integer, integer) TO GROUP golfscore</element>
  <element execution-count="12" last-execution-time="1331435624695" alias="SimpleDemo" user-name="golfscore">ALTER FUNCTION golf_score_sq(text, text, text, text, text, integer, integer) OWNER TO postgres</element>
  <element execution-count="12" last-execution-time="1331435624641" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION golf_score_sq(alreadyAuth_ text, securityuserid_ text, sessionid_ text, whereClause_ text, orderByClause_ text, rowLimit_ integer, rowOffset_ integer) RETURNS SETOF golf_score AS $BODY$ Declare whereClause text; orderByClause text; offsetStatement text; limitStatement text; Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_GOLF_SCORE' ); end if; --golf_score_id, last_update, golf_score, golfer_id whereClause =''; orderByClause=''; offsetStatement =''; limitStatement =''; if rowOffset_ &gt;0 then offsetStatement =' offset ' || rowOffset_ ; end if; if rowLimit_ &gt;0 then limitStatement =' limit '||rowLimit_; end if; if whereClause_ &lt;&gt;'' then whereClause = trim(leading whereClause_); whereClause = regexp_replace(whereClause, '^(where|WHERE)',''); whereClause = ' where ' || whereClause; end if; if orderByClause_ &lt;&gt; '' then orderByClause = orderByClause_; end if; return query execute 'select * from golf_score ' || whereClause || orderByclause || offsetStatement || limitStatement; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1331393433542" alias="SimpleDemo" user-name="golfscore">alter function golf_score_iq(text, text, text ,integer,integer,integer) owner to postgres</element>
  <element execution-count="6" last-execution-time="1331393433532" alias="SimpleDemo" user-name="golfscore">create or replace function golf_score_iq(alreadyauth_ text, securityuserid_ text, sessionid_ text,golfScoreId_ character,golfScore_ integer,golferId_ integer) returns golf_score as $body$ declare newrow golf_score; begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( securityuserid_,sessionid_) ; perform isuserauthorized( securityuserid_,'INSERT_GOLF_SCORE' ); end if; insert into golf_score( last_update,golf_score,golfer_id) values ( now(),golfScore_,golferId_) returning * into newrow; return newrow; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="1" last-execution-time="1325509608397" alias="SimpleDemo" user-name="golfscore">select * from golf_score</element>
  <element execution-count="10" last-execution-time="1325363042486" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golfer_sq(text, text, text, text, text, integer, integer) TO GROUP golfscore</element>
  <element execution-count="10" last-execution-time="1325363042485" alias="SimpleDemo" user-name="golfscore">ALTER FUNCTION golfer_sq(text, text, text, text, text, integer, integer) OWNER TO postgres</element>
  <element execution-count="4" last-execution-time="1325363042467" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION golfer_sq(alreadyAuth_ text, securityuserid_ text, sessionid_ text, whereClause_ text, orderByClause_ text, rowLimit_ integer, rowOffset_ integer) RETURNS SETOF golfer AS $BODY$ Declare whereClause text; orderByClause text; offsetStatement text; limitStatement text; Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_GOLFER' ); end if; --golfer_id, last_update, name whereClause =''; orderByClause=''; offsetStatement =''; limitStatement =''; if rowOffset_ &gt;0 then offsetStatement =' offset ' || rowOffset_ ; end if; if rowLimit_ &gt;0 then limitStatement =' limit '||rowLimit_; end if; if whereClause_ &lt;&gt;'' then whereClause = trim(leading whereClause_); whereClause = regexp_replace(whereClause, '^(where|WHERE)',''); whereClause = ' where ' || whereClause; end if; if orderByClause_ &lt;&gt; '' then orderByClause = orderByClause_; end if; return query execute 'select * from golfer ' || whereClause || orderByclause || offsetStatement || limitStatement; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1325363011460" alias="SimpleDemo" user-name="golfscore">select * from cross_table_cache_sq('ALREADY_AUTH', 'test', 'test')</element>
  <element execution-count="1" last-execution-time="1325363006722" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION cross_table_cache_sq(text, text, text) TO GROUP golfscore</element>
  <element execution-count="1" last-execution-time="1325363006702" alias="SimpleDemo" user-name="golfscore">ALTER FUNCTION cross_table_cache_sq(text, text, text) OWNER TO postgres</element>
  <element execution-count="2" last-execution-time="1325363006676" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION cross_table_cache_sq(alreadyAuth_ text, securityuserid_ text, sessionid_ text) RETURNS SETOF type_label_value AS $BODY$ Declare Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_CROSS_TABLE_CACHE' ); end if; return query execute 'select ''golfer''::varchar as tp, name as lbl, golfer_id::varchar as val from golfer '; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1325362980276" alias="SimpleDemo" user-name="golfscore">ALTER FUNCTION cross_table_cache_sq(text, text, text, text, text, integer, integer) OWNER TO postgres</element>
  <element execution-count="6" last-execution-time="1325360504015" alias="SimpleDemo" user-name="golfscore">select * from golfer_sq('ALREADY_AUTH', 'test', 'test')</element>
  <element execution-count="1" last-execution-time="1325360498274" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION golfer_sq(alreadyAuth_ text, securityuserid_ text, sessionid_ text) RETURNS SETOF type_label_value AS $BODY$ Declare Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_CROSS_TABLE_CACHE' ); end if; return query execute 'select ''golfer''::varchar as tp, name as lbl, golfer_id::varchar as val from golfer '; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1325360469805" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION golfer_sq(alreadyAuth_ text, securityuserid_ text, sessionid_ text) RETURNS SETOF type_label_value AS $BODY$ Declare Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_CROSS_TABLE_CACHE' ); end if; return query execute 'select ''golfer''::varchar as tp, name as lbl, golfer_id as val from golfer '; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1325360450366" alias="SimpleDemo" user-name="golfscore">create type type_label_value as (tp varchar, lbl varchar, val varchar)</element>
  <element execution-count="4" last-execution-time="1325360450349" alias="SimpleDemo" user-name="golfscore">drop type type_label_value cascade</element>
  <element execution-count="2" last-execution-time="1325360411711" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION golfer_sq(alreadyAuth_ text, securityuserid_ text, sessionid_ text) RETURNS SETOF type_label_value AS $BODY$ Declare Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_CROSS_TABLE_CACHE' ); end if; --golfer_id, last_update, name return query execute 'select ''golfer''::varchar as tp, name as lbl, golfer_id as val from golfer '; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="2" last-execution-time="1325360397859" alias="SimpleDemo" user-name="golfscore">create type type_label_value as (tp varchar(25), lbl varchar(25), val varchar(255) )</element>
  <element execution-count="2" last-execution-time="1325360256822" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION golfer_sq(alreadyAuth_ text, securityuserid_ text, sessionid_ text) RETURNS SETOF type_label_value AS $BODY$ Declare Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_CROSS_TABLE_CACHE' ); end if; --golfer_id, last_update, name return query execute 'select ''golfer'' as tp, name as lbl, golfer_id as val from golfer '; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1325360242779" alias="SimpleDemo" user-name="golfscore">create type type_label_value as (tp char(25), lbl varchar(25), val varchar(255) )</element>
  <element execution-count="2" last-execution-time="1325360211944" alias="SimpleDemo" user-name="golfscore">create or replace type type_label_value as (tp char(25), lbl varchar(25), val varchar(255) )</element>
  <element execution-count="1" last-execution-time="1325360200786" alias="SimpleDemo" user-name="golfscore">drop type type_label_value</element>
  <element execution-count="1" last-execution-time="1325360079639" alias="SimpleDemo" user-name="golfscore">select * from golfer_sq('ALREADY_AUTH', 'test', 'test', )</element>
  <element execution-count="1" last-execution-time="1325356938066" alias="SimpleDemo" user-name="golfscore">create type type_label_value as (tp as varchar(25), lbl varchar(25), val varchar(255) )</element>
  <element execution-count="1" last-execution-time="1325356314082" alias="SimpleDemo" user-name="golfscore">select 'golfer' as tp, name as label, golfer_id as value from golfer</element>
  <element execution-count="1" last-execution-time="1325356305161" alias="SimpleDemo" user-name="golfscore">select 'golfer' as tp, name as label golfer_id as value from golfer</element>
  <element execution-count="1" last-execution-time="1325356293013" alias="SimpleDemo" user-name="golfscore">select ''golfer'' as tp, name as label golfer_id as value from golfer</element>
  <element execution-count="1" last-execution-time="1325355651627" alias="SimpleDemo" user-name="golfscore">select * from security_privilege where priv_name in ('SELECT_CROSS_TABLE_CACHE')</element>
  <element execution-count="2" last-execution-time="1325336194858" alias="SimpleDemo" user-name="golfscore">select * from security_privilege where priv_name in ('SELECT_GOLFER','INSERT_GOLFER','UPDATE_GOLFER','DELETE_GOLFER')</element>
  <element execution-count="1" last-execution-time="1325336159229" alias="SimpleDemo" user-name="golfscore">INSERT INTO security_privilege( priv_name, last_update, description) VALUES ( 'SELECT_CROSS_TABLE_CACHE', now(), 'Required for all users to populate options')</element>
  <element execution-count="1" last-execution-time="1324938144738" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE VIEW vw_user_grant AS SELECT su.user_id, sp.profile_name, spriv.priv_name FROM security_user su LEFT JOIN security_profile sp ON su.security_profile_id = sp.security_profile_id LEFT JOIN security_profile_grant spg ON sp.security_profile_id = spg.security_profile_id LEFT JOIN security_privilege spriv ON spg.security_privilege_id = spriv.security_privilege_id</element>
  <element execution-count="1" last-execution-time="1324938134004" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE VIEW vw_user_grant AS SELECT su.user_id, su.client_id, sp.profile_name, spriv.priv_name FROM security_user su LEFT JOIN security_profile sp ON su.security_profile_id = sp.security_profile_id LEFT JOIN security_profile_grant spg ON sp.security_profile_id = spg.security_profile_id LEFT JOIN security_privilege spriv ON spg.security_privilege_id = spriv.security_privilege_id</element>
  <element execution-count="1" last-execution-time="1324938129748" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE VIEW vw_profile_grant AS SELECT sp.security_profile_id, sp.profile_name, spriv.security_privilege_id, spriv.priv_name, spg.last_update FROM security_profile sp LEFT JOIN security_profile_grant spg ON sp.security_profile_id = spg.security_profile_id LEFT JOIN security_privilege spriv ON spg.security_privilege_id = spriv.security_privilege_id</element>
  <element execution-count="1" last-execution-time="1324938117782" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE VIEW vw_profile_grant AS SELECT sp.client_id, sp.security_profile_id, sp.profile_name, spriv.security_privilege_id, spriv.priv_name, spg.last_update FROM security_profile sp LEFT JOIN security_profile_grant spg ON sp.security_profile_id = spg.security_profile_id LEFT JOIN security_privilege spriv ON spg.security_privilege_id = spriv.security_privilege_id</element>
  <element execution-count="1" last-execution-time="1324938106797" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE VIEW vw_profile_grant AS SELECT sp.client_id, sp.security_profile_id, sp.profile_name, spriv.security_privilege_id, spriv.priv_name, spg.last_update FROM security_profile sp LEFT JOIN security_profile_grant spg ON sp.security_profile_id = spg.security_profile_id LEFT JOIN security_privilege spriv ON s spg.security_privilege_id = spriv.security_privilege_id</element>
  <element execution-count="1" last-execution-time="1324938073331" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE VIEW vw_profile_grant AS SELECT sp.client_id, sp.security_profile_id, sp.profile_name, spriv.security_privilege_id, spriv.priv_name, spg.last_update FROM security_profile sp LEFT JOIN security_profile_grant spg ON sp.client_id = spg.client_id AND sp.security_profile_id = spg.security_profile_id LEFT JOIN security_privilege spriv ON spg.client_id = spriv.client_id AND spg.security_privilege_id = spriv.security_privilege_id</element>
  <element execution-count="1" last-execution-time="1324935553739" alias="SimpleDemo" user-name="golfscore">insert into security_profile_grant (security_privilege_id, security_profile_id)values(9,1)</element>
  <element execution-count="1" last-execution-time="1324935475844" alias="SimpleDemo" user-name="golfscore">select * from security_profile_grant</element>
  <element execution-count="1" last-execution-time="1324934054680" alias="SimpleDemo" user-name="golfscore">create or replace function golfer_handicap_sq(alreadyAuth_ text, securityuserid_ text, sessionid_ text) returns setof golfer_summary as $BODY$ Declare result golfer_summary; golfers golfer; Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_GOLFER_HANDICAP' ); end if; for golfers in select * from golfer order by name loop select golfers.golfer_id, golfers.name, avg(golf_score) as avg_score, max(last_update) as last_date, min(last_update) as first_date into result from ( select golf_score, last_update from golf_score where golfer_id =golfers.golfer_id order by last_update desc limit 10) as temp1 ; return next result; end loop; return; end; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="2" last-execution-time="1324933977688" alias="SimpleDemo" user-name="golfscore">select * from security_privilege</element>
  <element execution-count="1" last-execution-time="1324933943478" alias="SimpleDemo" user-name="golfscore">INSERT INTO security_privilege( security_privilege_id, priv_name, last_update, description) VALUES (9, 'SELECT_GOLFER_HANDICAP', now(), 'Allows users to select golfer handicaps')</element>
  <element execution-count="2" last-execution-time="1324931071247" alias="SimpleDemo" user-name="golfscore">drop function simpletest</element>
  <element execution-count="1" last-execution-time="1324931032895" alias="SimpleDemo" user-name="golfscore">create or replace function simpletest() returns setof golfer_summary as $BODY$ Declare result golfer_summary; Begin for result in select avg(golf_score) as avg_score, max(last_update) as last_date, min(last_update) as first_date from ( select golf_score, last_update from golf_score where golfer_id =1 order by last_update desc limit 10) as temp1 loop return next result; end loop; return; end; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1324931020764" alias="SimpleDemo" user-name="golfscore">create or replace type golfer_summary as (golfer_id int, golf_score int, last_date timestamp, first_date timestamp)</element>
  <element execution-count="2" last-execution-time="1324931007870" alias="SimpleDemo" user-name="golfscore">create type golfer_summary as (golfer_id int, golf_score int, last_date timestamp, first_date timestamp)</element>
  <element execution-count="1" last-execution-time="1324930953283" alias="SimpleDemo" user-name="golfscore">create type golfer_summary as (golfer_id int, golf_score int, last_date timestamp, first_date, timestamp)</element>
  <element execution-count="1" last-execution-time="1324930784288" alias="SimpleDemo" user-name="golfscore">select * from simpletest()</element>
  <element execution-count="1" last-execution-time="1324930784268" alias="SimpleDemo" user-name="golfscore">create or replace function simpletest() returns setof Record as $BODY$ Declare result Record; Begin for result in select avg(golf_score) as avg_score, max(last_update) as last_date, min(last_update) as first_date from ( select golf_score, last_update from golf_score where golfer_id =1 order by last_update desc limit 10) as temp1 loop return next result; end loop; return; end; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1324930758393" alias="SimpleDemo" user-name="golfscore">create or replace function simpletest() returns setof Record as $BODY$ Declare result Record; Begin for result in select avg(golf_score) as avg_score, max(last_update) as last_date, min(last_update) as first_date from ( select golf_score, last_update from golf_score where golfer_id =1 order by last_update desc limit 10) as temp1 return next result; end loop; return; end; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1324930576301" alias="SimpleDemo" user-name="golfscore">create or replace function simpletest() returns setof Record as $BODY$ Declare Begin return next select avg(golf_score) as avg_score, max(last_update) as last_date, min(last_update) as first_date from ( select golf_score, last_update from golf_score where golfer_id =1 order by last_update desc limit 10) as temp1 end; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100 ROWS 1000</element>
  <element execution-count="1" last-execution-time="1324930240667" alias="SimpleDemo" user-name="golfscore">select avg(golf_score) as avg_score, max(last_update) as last_date, min(last_update) as first_date from ( select golf_score, last_update from golf_score where golfer_id =1 order by last_update desc limit 10) as temp1</element>
  <element execution-count="2" last-execution-time="1324928374712" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golfer_dq(text, text, text,integer, timestamp) TO GROUP golfscore</element>
  <element execution-count="2" last-execution-time="1324928374711" alias="SimpleDemo" user-name="golfscore">alter function golfer_dq(text, text, text,integer, timestamp) owner to postgres</element>
  <element execution-count="2" last-execution-time="1324928374700" alias="SimpleDemo" user-name="golfscore">create or replace function golfer_dq(alreadyauth_ text, userid_ text, sessionid_ text ,golferId_ integer, lastUpdate_ timestamp ) returns boolean as $body$ declare begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( userid_,sessionid_) ; perform isuserauthorized(userid_,'DELETE_GOLFER' ); end if; delete from golfer where golfer_id=golferId_ and last_update = lastUpdate_; if found then return true; else raise exception 'Delete Failed for GOLFER- The record may have been changed or deleted before the attempt.'; end if; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="2" last-execution-time="1324928374688" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golfer_uq(text, text, text ,integer,timestamp,character varying) TO GROUP golfscore</element>
  <element execution-count="2" last-execution-time="1324928374677" alias="SimpleDemo" user-name="golfscore">alter function golfer_uq(text, text, text ,integer,timestamp,character varying) owner to postgres</element>
  <element execution-count="2" last-execution-time="1324928374667" alias="SimpleDemo" user-name="golfscore">create or replace function golfer_uq(alreadyauth_ text, securityuserid_ text, sessionid_ text , golferId_ integer, lastUpdate_ timestamp, name_ character varying) returns golfer as $body$ declare updatedrow golfer; begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( securityuserid_,sessionid_) ; perform isuserauthorized( securityuserid_, 'UPDATE_GOLFER' ); end if; update golfer set last_update = now() , name= name_ where golfer_id=golferId_ and last_update = lastUpdate_ returning * into updatedrow; if found then return updatedrow; else raise exception 'Update Failed for GOLFER- The record may have been changed or deleted before the attempt.'; end if; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="4" last-execution-time="1324928374655" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golfer_iq(text, text, text ,character varying) TO GROUP golfscore</element>
  <element execution-count="4" last-execution-time="1324928374644" alias="SimpleDemo" user-name="golfscore">alter function golfer_iq(text, text, text ,character varying) owner to postgres</element>
  <element execution-count="3" last-execution-time="1324928374633" alias="SimpleDemo" user-name="golfscore">create or replace function golfer_iq(alreadyauth_ text, securityuserid_ text, sessionid_ text,name_ character varying) returns golfer as $body$ declare newrow golfer; begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( securityuserid_,sessionid_) ; perform isuserauthorized( securityuserid_,'INSERT_GOLFER' ); end if; insert into golfer(last_update,name) values ( now(),name_) returning * into newrow; return newrow; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="2" last-execution-time="1324928374621" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golfer_bypk(text, text, text,integer) TO GROUP golfscore</element>
  <element execution-count="2" last-execution-time="1324928374610" alias="SimpleDemo" user-name="golfscore">ALTER FUNCTION golfer_bypk(text, text, text,integer) OWNER TO postgres</element>
  <element execution-count="2" last-execution-time="1324928374599" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION golfer_bypk(alreadyAuth_ text, securityuserid_ text, sessionid_ text ,golferId_ integer) RETURNS golfer AS $BODY$ Declare result golfer; Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_GOLFER' ); end if; --golfer_id, last_update, name select * into result from golfer where golfer_id=golferId_; return result; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100</element>
  <element execution-count="2" last-execution-time="1324928360390" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golf_score_dq(text, text, text,character, timestamp) TO GROUP golfscore</element>
  <element execution-count="2" last-execution-time="1324928360389" alias="SimpleDemo" user-name="golfscore">alter function golf_score_dq(text, text, text,character, timestamp) owner to postgres</element>
  <element execution-count="2" last-execution-time="1324928360377" alias="SimpleDemo" user-name="golfscore">create or replace function golf_score_dq(alreadyauth_ text, userid_ text, sessionid_ text ,golfScoreId_ character, lastUpdate_ timestamp ) returns boolean as $body$ declare begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( userid_,sessionid_) ; perform isuserauthorized(userid_,'DELETE_GOLF_SCORE' ); end if; delete from golf_score where golf_score_id=golfScoreId_ and last_update = lastUpdate_; if found then return true; else raise exception 'Delete Failed for GOLF_SCORE- The record may have been changed or deleted before the attempt.'; end if; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="2" last-execution-time="1324928360366" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golf_score_uq(text, text, text ,character,timestamp,integer,integer) TO GROUP golfscore</element>
  <element execution-count="2" last-execution-time="1324928360355" alias="SimpleDemo" user-name="golfscore">alter function golf_score_uq(text, text, text ,character,timestamp,integer,integer) owner to postgres</element>
  <element execution-count="2" last-execution-time="1324928360345" alias="SimpleDemo" user-name="golfscore">create or replace function golf_score_uq(alreadyauth_ text, securityuserid_ text, sessionid_ text , golfScoreId_ character, lastUpdate_ timestamp, golfScore_ integer, golferId_ integer) returns golf_score as $body$ declare updatedrow golf_score; begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( securityuserid_,sessionid_) ; perform isuserauthorized( securityuserid_, 'UPDATE_GOLF_SCORE' ); end if; update golf_score set last_update = now() , golf_score= golfScore_ , golfer_id= golferId_ where golf_score_id=golfScoreId_ and last_update = lastUpdate_ returning * into updatedrow; if found then return updatedrow; else raise exception 'Update Failed for GOLF_SCORE- The record may have been changed or deleted before the attempt.'; end if; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="2" last-execution-time="1324928360333" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golf_score_iq(text, text, text ,character,integer,integer) TO GROUP golfscore</element>
  <element execution-count="2" last-execution-time="1324928360322" alias="SimpleDemo" user-name="golfscore">alter function golf_score_iq(text, text, text ,character,integer,integer) owner to postgres</element>
  <element execution-count="2" last-execution-time="1324928360311" alias="SimpleDemo" user-name="golfscore">create or replace function golf_score_iq(alreadyauth_ text, securityuserid_ text, sessionid_ text,golfScoreId_ character,golfScore_ integer,golferId_ integer) returns golf_score as $body$ declare newrow golf_score; begin if alreadyauth_ &lt;&gt;'ALREADY_AUTH' then perform issessionvalid( securityuserid_,sessionid_) ; perform isuserauthorized( securityuserid_,'INSERT_GOLF_SCORE' ); end if; insert into golf_score( golf_score_id,last_update,golf_score,golfer_id) values ( golfScoreId_, now(),golfScore_,golferId_) returning * into newrow; return newrow; end; $body$ language 'plpgsql' volatile cost 100</element>
  <element execution-count="2" last-execution-time="1324928360299" alias="SimpleDemo" user-name="golfscore">GRANT EXECUTE ON FUNCTION golf_score_bypk(text, text, text,character) TO GROUP golfscore</element>
  <element execution-count="2" last-execution-time="1324928360289" alias="SimpleDemo" user-name="golfscore">ALTER FUNCTION golf_score_bypk(text, text, text,character) OWNER TO postgres</element>
  <element execution-count="2" last-execution-time="1324928360277" alias="SimpleDemo" user-name="golfscore">CREATE OR REPLACE FUNCTION golf_score_bypk(alreadyAuth_ text, securityuserid_ text, sessionid_ text ,golfScoreId_ character) RETURNS golf_score AS $BODY$ Declare result golf_score; Begin if alreadyAuth_ &lt;&gt;'ALREADY_AUTH' then perform isSessionValid( securityuserId_,sessionId_) ; perform isUserAuthorized( securityuserId_, 'SELECT_GOLF_SCORE' ); end if; --golf_score_id, last_update, golf_score, golfer_id select * into result from golf_score where golf_score_id=golfScoreId_; return result; End; $BODY$ LANGUAGE 'plpgsql' VOLATILE COST 100</element>
  <element execution-count="1" last-execution-time="1324928337545" alias="SimpleDemo" user-name="golfscore">CREATE TABLE public.golf_score ( golf_score_id SERIAL NOT NULL , last_update TIMESTAMP(3) WITHOUT TIME ZONE , golf_score INT4 , golfer_id INTEGER , PRIMARY KEY (golf_score_id) , CONSTRAINT FK_golf_score_1 FOREIGN KEY (golfer_id) REFERENCES public.golfer (golfer_id) ON DELETE RESTRICT ON UPDATE RESTRICT )</element>
  <element execution-count="2" last-execution-time="1324928337455" alias="SimpleDemo" user-name="golfscore">CREATE TABLE public.golfer ( golfer_id SERIAL NOT NULL , last_update TIMESTAMP(3) WITHOUT TIME ZONE , name VARCHAR(25) , PRIMARY KEY (golfer_id) )</element>
  <element execution-count="1" last-execution-time="1324928337421" alias="SimpleDemo" user-name="golfscore">DROP TABLE public.golfer cascade</element>
  <element execution-count="1" last-execution-time="1324928337381" alias="SimpleDemo" user-name="golfscore">DROP TABLE public.golf_score cascade</element>
  <element execution-count="2" last-execution-time="1324928323320" alias="SimpleDemo" user-name="golfscore">DROP TABLE public.golf_score</element>
  <element execution-count="1" last-execution-time="1324927949494" alias="SimpleDemo" user-name="golfscore">select * from golf_score_iq('ALREADY_AUTH', 'test', 'test' , 'text' ,1 ,1 )</element>
  <element execution-count="1" last-execution-time="1324927916893" alias="SimpleDemo" user-name="golfscore">select * from golf_score_sq('ALREADY_AUTH', 'test', 'test', '','',-1,-1)</element>
  <element execution-count="1" last-execution-time="1324927900187" alias="SimpleDemo" user-name="golfscore">INSERT INTO security_profile_grant( security_profile_id, security_privilege_id) VALUES ( 1, 8)</element>
  <element execution-count="1" last-execution-time="1324927900177" alias="SimpleDemo" user-name="golfscore">INSERT INTO security_profile_grant( security_profile_id, security_privilege_id) VALUES ( 1, 7)</element>
  <element execution-count="1" last-execution-time="1324927900165" alias="SimpleDemo" user-name="golfscore">INSERT INTO security_profile_grant( security_profile_id, security_privilege_id) VALUES ( 1, 6)</element>
</history>