<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" ng:app="AppModule"> 
<head> 
<title> Simple2 Demo</title> 
<script type="text/javascript" src="./jquery-1.7.1.js"></script>
<script type="text/javascript" src="./angular-0.10.6.min.js" ng:autobind ></script>

<script type="text/javascript"> 
//<![CDATA[
"use strict";
//shared variables
var urlTarget = "/cgi-bin2/SimpleRespond.pl";
var usrSessionId="";
var usrLoginId="";
var usrLastAction= new Date();
var usrLogoutScheduled=false;
var usrTimeOutDuration = 20*60*1000;
var clientLog=new Array();
var insertUpdateChoose = "INSERTUPDATE";


//validation functions
function isFieldIdEmpty(fieldId_){
  if (document.getElementById(fieldId_) == undefined) return true;
  if (document.getElementById(fieldId_).value == undefined) return true;
  if (document.getElementById(fieldId_).value == null) return true;
  if (document.getElementById(fieldId_).value == "") return true;
  return false;
}


function validateServerResponse(responseTxt){
	if(responseTxt == undefined ||responseTxt==null ){
	  logMsg("validateServerResponse - undefined response");
	  alert("Sorry, there was an unexpected error communicating with the server.");
	  return false;
	}else if(responseTxt.errorMsg != undefined){
		if(responseTxt.errorMsg.indexOf('Session Invalid')>-1 ){
	  		alert("Sorry, the session has expired and you will be logged out");
			usrSessionId="";
	  		//window.location.reload();
		}
	   logMsg ("validateServerResponse - Error Msg: " + responseTxt.errorMsg);
	   return false;
	}
  registerAction();
  return true;
}

function logMsg(msg){
  clientLog.push( String(msg) + "|"+ new Date());

}
function statusMsg(msg){
  $("#statusMsg").html(msg);
  logMsg("Console Msg:" +msg);
}



window.onbeforeunload = function () {
  if(usrSessionId !=""){
   return "If you click OK and continue to refresh this page, you will lose any data that has not been saved"
  }
}

function prepParams(params, resource, action){
 	if(params == null){ params = {}; }
  	params['spwfResource'] = resource;
	params['user_id'] = usrLoginId;
	params['session_id'] = usrSessionId;
  	if (action ==insertUpdateChoose){
 	  if(params['last_update']!= null && params['last_update']!= ""){
      		action = "update";
    	  }else{
      		action= "insert";
    	  }
        }
  	params['spwfAction'] = action;
	return params;
}


// timeout function
function timeoutIfNoAction(){ "use strict";
	var timeSince = new Date().getTime() - usrLastAction.getTime() ;
	if(usrLoginId !="" && timeSince >usrTimeOutDuration ){
		usrLogoutScheduled = true;
		statusMsg("Logging Out User in 1 minute");
		window.setTimeout(function(){if (usrLogoutScheduled){logOutUser();}},60000);
	}else{
	  window.setTimeout(timeoutIfNoAction, usrTimeOutDuration +1000  );
	}

}
function registerAction(){
  usrLastAction= new Date();
  usrLogoutScheduled = false;
}


function logOutUser(){
  location.reload(true);
  return;
}

function digest(er, ee) {
    if (null == ee || "object" != typeof ee || null == er || "object" != typeof er ) return er;
    for (var attr in ee) {
        er[attr] = ee[attr];
    }
    return er;
}



var appModule = angular.module('AppModule', []);
appModule.filter('pgDate', function(){
   return function(pgDate){
      return pgDate.substring(0,10);
   }
});

appModule.filter('FormatNumber',function(){
	return function(num,decimalNum,bolLeadingZero,bolParens,bolCommas){
		return FormatNumber(num,decimalNum,bolLeadingZero,bolParens,bolCommas);
	}
});


function handleServerResponse(msg, startTime, data){
	if(!validateServerResponse(data)){
		alert("Sorry, there was a problem communicating with the server.");
		return false
	}
	statusMsg( msg +" in " + (new Date().getTime()-startTime.getTime())/1000 + "s" );
	return true;
}


function onSuccessfulLogin(){
	$("#password").val("");
	displayMainLayout(true);
	$("#topMenuBar").show();
	registerAction();
	timeoutIfNoAction();
	setMainContentPane(showGolfScoreSummary);
	cacheCtl.retrieveCache();
}


function FormatNumber(num,decimalNum,bolLeadingZero,bolParens,bolCommas){ 
        if (isNaN(parseInt(num))) return "NaN";
	var tmpNum = num;
	var iSign = num < 0 ? -1 : 1;		// Get sign of number
	tmpNum *= Math.pow(10,decimalNum);
	tmpNum = Math.round(Math.abs(tmpNum))
	tmpNum /= Math.pow(10,decimalNum);
	tmpNum *= iSign;						
	var tmpNumStr = new String(tmpNum);

	// See if we need to strip out the leading zero or not.
	if (!bolLeadingZero && num < 1 && num > -1 && num != 0)
		if (num > 0)tmpNumStr = tmpNumStr.substring(1,tmpNumStr.length);
		else tmpNumStr = "-" + tmpNumStr.substring(2,tmpNumStr.length);
		
	// See if we need to put in the commas
	if (bolCommas && (num >= 1000 || num <= -1000)) {
		var iStart = tmpNumStr.indexOf(".");
		if (iStart < 0)	iStart = tmpNumStr.length;

		iStart -= 3;
		while (iStart >= 1) {
			tmpNumStr = tmpNumStr.substring(0,iStart) + "," + tmpNumStr.substring(iStart,tmpNumStr.length)
			iStart -= 3;
		}		
	}

	// See if we need to use parenthesis
	if (bolParens && num < 0) tmpNumStr = "(" + tmpNumStr.substring(1,tmpNumStr.length) + ")";

	if(tmpNumStr.indexOf(".")<0 && decimalNum >0){
	  tmpNumStr += ".";
	}
	while((tmpNumStr.length -tmpNumStr.indexOf(".")) <= decimalNum){
	  tmpNumStr += "0";

	}

	return tmpNumStr.toString();		// Return our formatted string!
}

var cacheCtl;
function CacheCtl($http){
  cacheCtl = this;
  cacheCtl.typeLabelValueCache = new Array();
  cacheCtl.retrieveCache = function(){ 
    var startTime,typeNdx, params;
    params = prepParams(params,"cross_table_cache","select");
    startTime= new Date();
    $http.post(urlTarget,params).success(
      function(data, status, headers, config) {
	if(handleServerResponse("Sucessfully Retrieved Cache ",startTime, data)){
          cacheCtl.typeLabelValueCache = data.rows;
          onRefreshCache();
	}
      }
    );
  }//end retrieveCache


}//end CacheCTL

function onRefreshCache(){
  golfScoreCtl.golfers = cacheCtl.typeLabelValueCache;
}

//]]
</script>
<style type="text/css">
.MainContentPaneStyle{
  width:100%;
  height:100%;
  display:none;
  overflow:auto;
  /*background-color:green;*/
  padding: 5px 5px 5px 5px ;
}
.MainLayout{
  display:none;/*Initially Hidden*/
}

body{
  font-family:"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
  font-size:12px;
}
.small{
  color:#666666;
  display:block;
  font-size:11px;
  font-weight:normal;
  text-align:left;
}

.error{
  color: red;
}

input{
  float:left;
  font-size:12px;
  padding:4px 2px;
  border:solid 1px ;
  width:200px;
  margin:2px 0 20px 10px;
}
select{
width:200px;
}

.formLayout .labelColumn{
  text-align:right;
  font-weight:bold;
  padding:7px 25px 20px 50px;
}
table.formLayout{
  border-width: 2px;
  border-style: solid;
  border-color:green;
  background-color:white;
}
.formLayout button{
  clear:both;
  background-color:#666666;
  width:125px;
  height:31px;
  text-align:center;
  line-height:31px;
  color:#FFFFFF;
  font-size:11px;
  font-weight:bold;
}
.formLayout .formHeader{
  font-weight: bold;
  font-size: 150%;
}

.formLayout .errorColumn{
  width:50px;
}
.formHeaderTD{
  padding:15px;
}
.vcenter {
  position:absolute; 
  top:0; bottom:0; left:0; right:0;
  margin:auto; 
  height:240px; width:70%;
}
#statusMsg{
  display:block;
  position: relative;
  top: 5px;
  left: 5px;
  border-width: 1px;
  border-style: outset;
  width: 500px;
  padding:1px;
}

.dataTable{

}
.dataTable th{
font-weight:bold;
}

.formTable{
border-style:none;
}
.formTable td{
border-style:none;
}



/* ----------------------------------------------------

   AUTHOR           :  	Erwin Aligam
   WEBSITE          :   http://www.styleshout.com/
   TEMPLATE NAME    : 	PixelGreen
   TEMPLATE CODE    : 	S-0010
   VERSION          :   1.3
   LAST MODIFIED    :   January 19, 2010

------------------------------------------------------- */
 
/* ----------------------------------------------------
   HTML ELEMENTS
------------------------------------------------------- */

/* top elements */
* { padding: 0; margin: 0; outline: 0; }

body {
	margin: 0; 	padding: 0;
	font: normal 73%/1.6em 'Trebuchet MS', Tahoma, sans-serif;
	color: #555;
	background: #FFF url(./img/bg.jpg) repeat-x;
	text-align: center;		
}

/* links */
a:link, a:visited { background: inherit; color: #72A545; text-decoration: none; }
a:hover { background: inherit; color: #006699; text-decoration: underline; }

/* headers */
h1, h2, h3 { font: bold 1em 'Trebuchet MS', Tahoma, Sans-serif; }
h1 { font-size: 1.4em; color: #65944A; }
h2 { font-size: 1.2em; text-transform: uppercase; }
h3 { font-size: 1.2em; }

p, h1, h2, h3 {
	margin: 10px 15px;
}
ul, ol {
	text-align: left;
	margin: 10px 30px;
	padding: 0 15px;		
}

/* images */
img {
	border: 1px solid #DADADA;
	padding: 8px;
	background: #FAFAFA;
}
img.float-right {
  margin: 5px 0px 5px 15px;  
}
img.float-left {
  margin: 5px 15px 5px 0px;
}

code {
  margin: 5px 0;
  padding: 10px;
  text-align: left;
  display: block;
  overflow: auto;  
  font: 500 1em/1.5em 'Lucida Console', 'courier new', monospace;
  /* white-space: pre; */
  background: #FAFAFA;
  border: 1px solid #f2f2f2;  
  border-left: 3px solid #72A545;
}
acronym {
  cursor: help;
  border-bottom: 1px solid #777;
}
blockquote {
	margin: 15px; 	padding: 0 0 0 20px;  	
  	background-color: #FAFAFA; 
	background-position: 8px 10px;
	border: 1px solid #f2f2f2; 
	border-left: 3px solid #72A545;  
	font: bold 1.2em/1.5em "Trebuchet MS", Tahoma, sans-serif; 
	color: #666666;	
}

/* start - table */
table {
	border-collapse: collapse;
	margin: 10px 15px;	
}
th strong {
	color: #fff;
}
th {
	background: #74A846;
	height: 29px;
	padding-left: 11px;
	padding-right: 11px;
	color: #fff;
	text-align: left;
	border-left: 1px solid #B6D59A;
	border-bottom: solid 2px #FFF;
}
tr {
	height: 30px;
}
td {
	padding-left: 11px;
	padding-right: 11px;
	/* border-left: 1px solid #FFE1C3; */
	border-left: 1px solid #FFF;
	border-bottom: solid 1px #ffffff;
}
td.first,th.first {
	border-left: 0px;
}
tr.row-a {
	background: #F8F8F8;
}
tr.row-b {
	background: #EFEFEF;
}
/* end - table */

/* form elements 
form {
	margin:10px 15px; padding: 0;
	border: 1px solid #f2f2f2; 
	background-color: #FAFAFA; 
}
label {
	display:block;
	font-weight:bold;
	margin:5px 0;
}
input {
	padding: 2px;
	border:1px solid #eee;
	font: normal 1em "Trebuchet MS", Tahoma, sans-serif;
	color:#777;
}
textarea {
	width:400px;
	padding:2px;
	font: normal 1em "Trebuchet MS", Tahoma, sans-serif;
	border:1px solid #eee;
	height:100px;
	display:block;
	color:#777;
}
input.button { 
	margin: 0; 
	font: bold 1em Arial, Sans-serif; 
	background: #FFF url(./img/gradientbg.jpg) repeat-x; 
	padding: 2px 3px; 
	color: #333;	
	border: 1px solid #DADADA;	
}
*/
/* search form */
.searchform {
	background-color: transparent;
	border: none;	margin: 0; padding: 0;	
}
.searchform p { margin: 10px; padding: 0; }
.searchform input.textbox { 
	width: 130px;
	color: #333; 
	height: 20px;
	padding: 2px;	
	vertical-align: top;
}
.searchform input.button { 
	font: bold 12px Arial, Sans-serif; 
	color: #333;	
	width: 60px;
	height: 26px;
	border: 1px solid #DADADA;
	padding: 3px 5px;	
	vertical-align: top;
}

/* ----------------------------
	  LAYOUT
------------------------------- */

#header-content, #content, #footer-content {
	width: 760px;
}

/* header */
#header {
	height: 100px;
	text-align: left;	
}
#header-content {	
	margin: 0 auto; padding: 0;
	position: relative;
}
#header-content h1#logo {
	position: absolute;	
	font: bold 45px 'Trebuchet MS', Sans-serif;
	letter-spacing: -2px; 
	color: #FFF;
	margin: 0; padding: 0;		
	
	/* change the values of left and top to adjust the position of the logo */
	top: 0; left: 0px;
}
#header-content h1#logo a {
	text-decoration: none;
	color: #FFF;
}
#header-content #slogan {
	position: absolute;	
	font: bold 12px 'Trebuchet Ms', Sans-serif;
	text-transform: none;
	color: #FFF;	
	margin: 0; padding: 0;
	
	/* change the values of left and top to adjust the position of the slogan */
	top: 55px; left: 40px;
}

/* header menu */
#header-content ul {
	position: absolute;
	right: -5px; top: 15px;
	font: bolder 1.3em 'Trebuchet MS', sans-serif;
	color: #FFF;
	list-style: none;
	margin: 0; padding: 0;		
}
#header-content li {
	display: inline;
}
#header-content li a {
	float: left;
	display: block;
	padding: 3px 12px;	
	color: #FFF;
	background-color: #333;
	text-decoration: none;
	border-right: 1px solid #272727;
}
#header-content li a:hover {
	background: #65944A;
	color: #FFF;
}
#header-content li a#current  {
	background: #65944A;
	color: #FFF;
}

/* header photo */
.headerphoto {
	margin: 0 auto;
	width: 770px;
	height: 200px;
	padding: 15px 10px 10px 10px; 
	/*background: #FFF url(headerphoto.jpg) no-repeat center;	*/
}

/* content */
#content-wrap {
	clear: both;
	float: left;
	width: 100%;
}
#content {
	text-align: left;	
	padding: 0;
	margin: 0 auto;	
}

/* sidebar */
#sidebar {
	float: right;
	width: 30%;
	margin: 0 0 10px 0; padding: 0;	
}	
#sidebar h1 {
	padding: 10px 0px 5px 10px;
	margin: 0;	
	font: bold 1.3em 'Trebuchet MS', Tahoma, Sans-serif;
}
.sidebox {
	background: #F5F5F5;
	border: 1px solid #EFEDED;
	margin-bottom: 10px;
}

/* sidebar menu */
#sidebar ul.sidemenu {
	list-style:none;
	margin: 10px 0 15px 0;
	padding: 0;
	background: #F2F2F2;			
}
#sidebar ul.sidemenu li {
	padding: 0px 10px;
}
#sidebar ul.sidemenu a {
	display:block;
	font-weight:normal;
	color: #333;
	height: 1.5em;	
	padding:.3em 0 .3em 15px;
	line-height: 1.5em;
	border-bottom: 1px dashed #D4D4D4;
	text-decoration:none;
}
#sidebar ul.sidemenu a.top{	
	border-top: 1px dashed #D4D4D4;
}
#sidebar ul.sidemenu a:hover {
	padding: .3em 0 .3em 10px;
	border-left: 5px solid  #65944A;
	color: #65944A;		
}

/* main */
#main {
	float: left;
	width: 68%;	
	margin: 0 0 10px 0; padding: 0;	
}
#main h1 {
	padding: 10px 0px 0px 5px;
	margin: 0 0 0 10px;
	border-bottom: 1px solid #f2f2f2; 	
	font: normal 1.8em 'Trebuchet MS', Tahoma, Sans-serif;
}
#main ul li {
	list-style-image: url(bullet.gif);
}

.post {
	margin: 0; padding: 0;
	background: #FFF url(./img/gradientbg.jpg) repeat-x;
	border: 1px solid #EFEDED;
}
.post .post-footer {
	background-color: #FAFAFA;
	border: 1px solid #f2f2f2;
	padding: 5px; margin-top: 20px;
	font-size: 95%;
}
.post .post-footer .date {
	background: url('clock.gif') no-repeat 0 center;
	padding-left: 20px; margin: 0 10px 0 5px;
}
.post .post-footer .comments {
	background: url('comment.gif') no-repeat 0 center;
	padding-left: 20px; margin: 0 10px 0 5px;
}
.post .post-footer .readmore {
	background: url('page.gif') no-repeat 0 center;
	padding-left: 20px; margin: 0 10px 0 5px;
}

/* footer */
#footer {
	clear: both;
	margin: 0; padding: 0;
	font: normal .95em/1.6em 'Trebuchet MS', Tahoma, Arial, sans-serif;
	text-align: left;	
}

#footer h1, #footer p {	margin-left: 0; }

#footer-content {	
	border-top: 1px solid #EAEAEA;
	margin: 0 auto;
	padding-left: 15px;
}
#footer-content a {
	text-decoration: none;
}
#footer-content a:hover {
	color: #333;
}

/* footer list */
#footer-content ul.flist {
	list-style: none;
	margin: 0; padding: 0;
    border-top: 1px solid #f2f2f2;
}
#footer-content ul.flist li {
    border-bottom: 1px solid #f2f2f2;
}
#footer-content ul.flist li a:link,
#footer-content ul.flist li a:visited {
    color: #555;
    display: block;
	font-weight: normal;
	padding: 5px 0 ;
	width: 98%;
}
#footer-content ul.flist li a:hover {
  text-decoration: none;
  color: #222;
}


#footer-content .col {
	width: 240px;
	padding: 0 5px 30px 0;	
}
#footer-content .col2 {
	width: 230px;
	padding: 0 0 30px 0;	
}
#footer-content .space-sep {
	margin-right: 20px;
}

/* alignment classes */
.float-left  { float: left; }
.float-right { float: right; }
.align-left  { text-align: left; }
.align-right {	text-align: right; }

/* additional classes */
.clear { clear: both; }
.gray  { color: #BFBFBF; }




    input.ng-invalid { border: solid 1px red; }
    .ng-form {display: block;}
    .FieldError{
	color:red;
    }
</style>
</head>

<body style="background-color:white; " onload='bodyOnLoad();' onresize="bodyOnResize();" > 
<script type="text/javascript">
$(document).ready( function(){
//	$("logOutLink").click(logOutUser);
//	$("#logout").click(logOutUser);
	$("#aboutGolfScore").click(function(){setMainContentPane(showAboutPane);});
	$("a#SummaryPage").click(function(){setMainContentPane(showGolfScoreSummary);});
	$("a#golfScoreEntry").click(function(){setMainContentPane(showGolfScoreCreate);});
	$("a#logViewer").click(function(){setMainContentPane(showClientLogViewer);});
});

//Layout Functions
var currentContentPane="";
function bodyOnLoad(){
  sizeLeftNav();
}
function bodyOnResize(){
  sizeLeftNav();
}

function sizeLeftNav(){


  document.getElementById('leftnav').style.height= (window.innerHeight-60) +"px";
  document.getElementById('mainContent').style.top="100px";
  document.getElementById('mainContent').style.left="0px";
  document.getElementById('mainContent').style.height=(window.innerHeight - 135 ) +"px";
  document.getElementById('mainContent').style.width=(window.innerWidth- 20 ) +"px";
}
function displayMainLayout(showHide){
  var display = (showHide)?"block":"none";
  //document.getElementById('leftnav').style.display=display;
  document.getElementById('header').style.display=display;
  document.getElementById('footer').style.display=display;
  document.getElementById('mainContent').style.display=display;
  display = (showHide)?"none":"block";
  document.getElementById('LoginPortal').style.display=display;

}
function setMainContentPane(showFunction){
  if(document.getElementById(currentContentPane)!= undefined){
	document.getElementById(currentContentPane).style.display="none";
  }
  currentContentPane = showFunction();
}

</script>
<div id="header"><div id="header-content">	
	<h1 id="logo"><a href="index.html" title="">golf<span class="gray">score</span></a></h1>	
		<h2 id="slogan">keepin' it honest...</h2>

		<div id = "topMenuBar" style="display:none;"> 
		<ul>
			<li><a id="SummaryPage">Home</a></li>
			<li><a id="">Golfers</a></li>
			<li><a id="golfScoreEntry">Scores</a></li>
			<li><a id="aboutGolfScore">About</a></li>
			<li><a id="logViewer">Log</a></li>
			<li id="logout"><a >Logout</a></li>			
		</ul>	</div>
	</div ></div >

<div id="footer" class="MainLayout" style="position:fixed; bottom: 0; left:0; min-height:25px; height:auto!important;height:25px;width:100%; background-color:#DCDCDC;"><span id="statusMsg" ></span></div>

<div id='leftnav' class="MainLayout" style='position:fixed; top:25px; left:0; width:200px; margin:0px ; padding: 5px;background-color:green;overflow:auto;'> 
</div>


<div id="mainContent" class="MainLayout" style="position:fixed;width:100%;padding: 5px 5px 5px 15px;margin:0px; overflow:auto;" ng:controller="CacheCtl">

<script type="text/javascript">
var golfScoreSummaryCtl;
function GolfScoreSummaryCtl($http){
golfScoreSummaryCtl = this;
  this.golferSummaries;
  this.retrieveGolfScoreSummary = function(params){ 
  var startTime, stopTime;
  params=  prepParams(params,"golf_score_summary" ,"select" );
  startTime= new Date();
  $http.post(urlTarget,params).success(function(data, status, headers, config) {
	if(handleServerResponse("Sucessfully Retrieved Golfer Handicaps",startTime, data)){
	        golfScoreSummaryCtl.golferSummaries = data.rows;
	}
  });

}//endretrieveGolferSummaries
}//end class






function showGolfScoreSummary(){
golfScoreSummaryCtl.retrieveGolfScoreSummary(); 
  $("#golfScoreSummary").fadeIn();
  return "golfScoreSummary";
}
</script>
<div id="golfScoreSummary" class="MainLayout MainContentPaneStyle" ng:controller="GolfScoreSummaryCtl" >

<table id="golfScoreSummaryTable" style="border-width: 1px; border-style:solid;" class='dataTable' >
<tr> <th>Golfer</th><th>Score</th><th>Period</th> </tr>
  <tr ng:repeat="summary in golferSummaries">
  	<td>{{summary.golfer_id}} {{summary.golfer_name}}</td><td> {{summary.golf_score}} - {{summary.golf_score |FormatNumber:2:true:false:true}}</td><td>{{summary.first_date}} - {{summary.last_date |pgDate }}</td>
 </tr>
</table>
</div> 


<div id="golfScoreCreate" class="MainLayout MainContentPaneStyle" ng:controller="GolfScoreCtl">
<form id="golfScore" action="">
<table id="golfScoreFormTable" style="" class='formTable'>
<tr><td> Golfer </td><td><select ng:model="golfScoreForm.golferSelect" ng:options="golferiterator.lbl for golferiterator in golfers" ></select></td></tr>
<tr><td> Score </td><td><input ng:model="golfScoreForm.golf_score" type="text"/></td></tr>
<tr><td colspan="2"><button type="button" id="golfScoreFormSave" value="Save" ng:click="saveGolfScore(this.golfScoreForm)" >Save</button><input type="hidden" id="last_update"></td></tr>
</table>
</form>



</div> 

<script type="text/javascript">
var golfScoreCtl;
function GolfScoreCtl($http){
  golfScoreCtl = this;
  //this.golfers;
   this.saveGolfScore = function (params){ 
	"use strict";
    var startTime;
    params = prepParams(params,"golf_score",insertUpdateChoose);
    params['golfer_id'] = params.golferSelect.val;
    params['golferSelect']=null;//don't forward to server
    startTime=new Date();
    $http.post(urlTarget,params).success(
	function(data, status, headers, config) {
 		handleServerResponse("Saved Golf Score ",startTime, data);
        }
    );


  }// end savegolfscore
}//end GolfScoreCTL

function showGolfScoreCreate(){
  $("#golfScoreCreate").fadeIn();
  return "golfScoreCreate";
}

</script>


<div id="aboutPane" class="MainLayout MainContentPaneStyle" style="text-align:left; ">
<div id ="aboutPaneCenterDiv" style="position:relative;width:300; height: 500; margin-left:auto; margin-right:auto; background-color:white; max-width:300; ">
<h1 style="width:40em;margin-left: auto; margin-right: auto;text-align:center;">About golfscore</h1>

<p style="width:40em;margin-left: auto; margin-right: auto; ">golfscore is an open source application developed by Martinanalytics.  Part of our open source model leverages software developed by other open source contributors that we recognize here:
<ul style="width:40em;margin-left: auto; margin-right: auto;padding: 10px 0px 10px 100px;">
<li><a href="">jQuery</a> provides our AJAX and Javascript handlers</li>
<li>Site styling provided by <a href="http://www.styleshout.com/">StyleShout's</a> PixelGreen web template</li>
<li><a href="http://www.apache.org/">Apache Web Server</a> </li>
<li>Proudly developed in <a href="http://www.perl.org/">Perl</a> </li>
<li>Database backended by <a href="http://www.postgresql.org/">PostgreSQL</a> </li>
<li>Developed on the <a href="http://www.ubuntu.org/">Ubuntu</a> Platform </li>

</ul>
</p>

</div>
</div>
<script type="text/javascript">

function showAboutPane(){
alert("");
  $("#aboutPane").fadeIn();
  return "aboutPane";
}

</script>



<div id="clientLogViewer" class="MainLayout MainContentPaneStyle">
<ul id ="clientLogView">
</ul>
</div> 
<script type="text/javascript">

function showClientLogViewer(){
  $("#clientLogViewer").fadeIn();
  $("ul#clientLogView").find("li").remove();
	$("ul#clientLogView").html("<li>Log viewed|"+ new Date()+"</li>");
  for(var ndx=0;ndx<clientLog.length;ndx++){
	$("ul#clientLogView li:last").after("<li>" + clientLog[ndx] + "</li>");
  }
  return "clientLogViewer";
}


</script>

</div><!--End Main Content-->
<!--Begin LoginPortal-->

<script type="text/javascript">
var loginPageCtl;
function LoginPageCtl($http){
var self = this;
loginPageCtl = this;
this.loginForm={};

this.result="";
this.authenticateUser = function(params){ "use strict";
  var startTime, stopTime;
  params['spwfResource'] = "security_user";
  params['spwfAction'] = "authenticate";

  startTime= new Date();
  $http.post(urlTarget,params).success(function(data, status, headers, config) {
	if(handleServerResponse("Authentication Attempt Answered",startTime, data)){
	   if(data.rows[0].session_id ==""){
		alert("Sorry, I Couldn't validate those Credentials");
		self.loginForm.password="";
	   }else{
		var r = data.rows[0];
		statusMsg("Successfully Authenticated User: " + r.user_id );
		usrSessionId = r.session_id;
		usrLoginId = r.user_id;
		onSuccessfulLogin();
	   }
      }
  });
}

this.loginForm.user_id="golfscore";
this.loginForm.password="golfscore";
}//end LoginPageCtl


</script>

<div id="LoginPortal" style="position:fixed; height:100%; width:100%" ng:controller="LoginPageCtl">
<img align="center" height="150" width ="470" src="./img/headerphoto.jpg">
<div  class="vcenter">
<form name="loginHolder">  
  <fieldset style="border:0">  
    <table class="formLayout" style="margin: auto;" vertical-align="middle">
    <tr><td colspan="3" class="formHeaderTD"><span class="formHeader">Login</span> <br/>
	<span class="small" >Please enter your login credentials</span><hr/></td></tr>
    <tr>
    <td class="labelColumn" style="" ><label for="user_id" id="user_id_label" >User ID</label> </td> 
    <td><input type="text" name="user_id" ng:model="loginForm.user_id" id="user_id" size="30" value="" class="fieldbox" required /> </td> <td><span class="FieldError" ng:show="loginHolder.user_id.$error.REQUIRED">* Required</span></td>
     </tr><tr>
    <td class="labelColumn"><label for="password" id="password_label">Password</label>  </td>
    <td><input type="password" ng:model="loginForm.password" id="password" size="30" value="" class="fieldbox" required />  </td>  <td><span class="FieldError" ng:show="loginHolder.password.$error.REQUIRED">* Required</span></td>

     </tr><tr>
    <td colspan="3" align="center" style="padding: 15px">
	<button type="button"  id="login_button" class="custombutton"  ng:click="authenticateUser(this.loginForm)" ng:disabled="{{this.loginHolder.$invalid}}"> Login </button>  
    </td>
</tr></table>
  </fieldset>  
</form>  

</div>
</div> <!--loginportal--> 
<!--End LoginPortal-->

<div id="customMsgBox" style="position: absolute;height:100%;width:100%; top:0; left:0;background-color:gray;opacity:0.5;z-index:1000;display:none;">
<!--
<table style="height:100%; width:100%">
	<tr><td colspan="3">&nbsp;</td></tr>
<tr><td>&nbsp;</td><td>msg</td><td>&nbsp;</td></tr>
-->
<div style="margin-left: auto; margin-right:auto;min-height: 10em; display: table-cell; vertical-align: middle; border-style=onset;border-width:1px; width:300px; height:300px; background-color:red">msg</div>

</div>

</body>
</html>